<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SNP Detail - SNP Browser</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='snp_detail.css') }}" />
</head>
<body>
  <header>
    <h1>PAANN T2D Browser</h1>
  </header>
  
  <main>
    <div class="navigation">
      <a href="{{ url_for('home') }}">← Back to Home</a>
    </div>
    
    <section class="snp-detail">
      {% if snp %}
        <h2>{{ snp.RSID }} Statistic Profile</h2>
        
        <!-- Basic Information Card -->
        <div class="card">
          <h3>Basic Information</h3>
          <p><strong>RSID:</strong> {{ snp.RSID }}</p>
          <p><strong>Chromosome:</strong> {{ snp.Chromosome }}</p>
          <p><strong>Position:</strong> {{ snp.Position }}</p>
          <p><strong>Reference Allele:</strong> {{ snp.Reference_Allele }}</p>
          <p><strong>Alternate Allele:</strong> {{ snp.Alternate_Allele }}</p>
          <p><strong>Gene:</strong> {{ snp.Mapped_Gene if snp.Mapped_Gene else "N/A" }}</p>
          <p><strong>Phenotype:</strong> {{ snp.Phenotype if snp.Phenotype else "N/A" }}</p>
          <p><strong>P-Value:</strong> {{ snp.P_value if snp.P_value else "N/A" }}</p>
          <p><strong>Population:</strong> {{ snp.Population if snp.Population else "N/A" }}</p>
        </div>
        
        <!-- Comparative Statistics Card -->
        <div class="card">
          <h3>Comparative Statistics</h3>
          <p><strong>FST Score:</strong> {{ snp.FST_Score if snp.FST_Score else "N/A" }}</p>
          <p><strong>XPEHH Score:</strong> {{ snp.XPEHH_Score if snp.XPEHH_Score else "N/A" }}</p>
        </div>
        
        <!-- Tabs for Population Specific Statistics -->
        <div class="tabs">
          <button class="tab-button active" onclick="showTab('BEB')">BEB</button>
          <button class="tab-button" onclick="showTab('PJL')">PJL</button>
        </div>
        
        <div id="BEB" class="tab-content active">
          <div class="card">
            <h3>Population Specific Statistics - BEB</h3>
            {% if snp.TajimaD_BEB or snp.Nucleotide_Diversity_BEB or snp.Haplotype_Diversity_BEB %}
              <p><strong>TajimaD:</strong> {{ snp.TajimaD_BEB if snp.TajimaD_BEB else "N/A" }}</p>
              <p><strong>Nucleotide Diversity:</strong> {{ snp.Nucleotide_Diversity_BEB if snp.Nucleotide_Diversity_BEB else "N/A" }}</p>
              <p><strong>Haplotype Diversity:</strong> {{ snp.Haplotype_Diversity_BEB if snp.Haplotype_Diversity_BEB else "N/A" }}</p>
            {% else %}
              <p>No BEB-specific data available.</p>
            {% endif %}
          </div>
        </div>
        
        <div id="PJL" class="tab-content">
          <div class="card">
            <h3>Population Specific Statistics - PJL</h3>
            {% if snp.TajimaD_PJL or snp.Nucleotide_Diversity_PJL or snp.Haplotype_Diversity_PJL %}
              <p><strong>TajimaD:</strong> {{ snp.TajimaD_PJL if snp.TajimaD_PJL else "N/A" }}</p>
              <p><strong>Nucleotide Diversity:</strong> {{ snp.Nucleotide_Diversity_PJL if snp.Nucleotide_Diversity_PJL else "N/A" }}</p>
              <p><strong>Haplotype Diversity:</strong> {{ snp.Haplotype_Diversity_PJL if snp.Haplotype_Diversity_PJL else "N/A" }}</p>
            {% else %}
              <p>No PJL-specific data available.</p>
            {% endif %}
          </div>
        </div>
        
      {% else %}
        <p>No details found for this SNP.</p>
      {% endif %}
    </section>
    
    <div class="back-home">
      <a href="{{ url_for('home') }}">Back to Home</a>
    </div>
  </main>
  
  <footer>
    <p>© 2024 PAANN T2D Browser | <a href="{{ url_for('contact') }}">Contact Us</a></p>
  </footer>
  
  <script>
    // Simple tab toggle script
    function showTab(tabName) {
      // Remove active class from all tab buttons and tab contents
      var buttons = document.querySelectorAll('.tab-button');
      var contents = document.querySelectorAll('.tab-content');
      buttons.forEach(function(btn) {
        btn.classList.remove('active');
      });
      contents.forEach(function(content) {
        content.classList.remove('active');
      });
      // Add active class to the selected button and content
      document.querySelector('.tab-button[onclick*="' + tabName + '"]').classList.add('active');
      document.getElementById(tabName).classList.add('active');
    }
  </script>
</body>
</html>
